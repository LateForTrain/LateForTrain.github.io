<!--
    Simple static Telegram WebApp. Does not verify the WebAppInitData, as a bot token would be needed for that.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>python-telegram-bot Example WebApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<script type="text/javascript">
    // Function to check if WebApp is initialized and get the inidata
    function displayInidata() {
        if (window.Telegram && window.Telegram.WebApp) {
            const inidata = window.Telegram.WebApp.initData;
            if (inidata) {
                document.getElementById('inidata').textContent = JSON.stringify(inidata, null, 2);
            } else {
                document.getElementById('inidata').textContent = 'InitData is not available.';
            }
        } else {
            document.getElementById('inidata').textContent = 'Telegram Web App is not initialized.';
        }
    }

    // Function to display the version
    function displayVersion() {
        const version = window.Telegram.WebApp.version;
        if (version) {
            document.getElementById('version').textContent = version;
        } else {
            document.getElementById('version').textContent = 'Version is not available.';
        }
    }
    
    // Wait for the WebApp to be ready
    Telegram.WebApp.ready();
    
    // Additional fallback if the event isn't firing properly
    if (window.Telegram.WebApp.isReady) {
        displayInidata();
        displayVersion();
    } else {
        document.getElementById('inidata').textContent = 'Web App not ready. Ensure this is running within Telegram.';
        document.getElementById('version').textContent = 'Web App not ready. Ensure this is running within Telegram.';
    }

    Telegram.WebApp.close();
</script>
<body>
    <h1>Telegram Web App 2</h1>
    <p>Displaying the initial data (inidata) from Telegram Web App:</p>

    <div id="inidata" class="inidata">
        Loading inidata...
    </div>
    <div id="version" class="version">
        ???
    </div>  
</body>
</html>

